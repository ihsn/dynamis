

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.14. Script 14: Demographic Macro-Projections &mdash; DYNAMIS-POP  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.15. Script 15: Model Settings" href="15_Settings.html" />
    <link rel="prev" title="1.13. Script 13: Lower Secondary Education" href="13_LowerSecondary.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> DYNAMIS-POP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="AnalysisInput-Index.html">1. Parameter Generation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_Setup_ABC_2000.html">1.1. Script 1: Country/Version-Specific Setup File</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_CreateStartpop.html">1.2. Script 2: Starting Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_PrimaryEducation.html">1.3. Script 3: Primary Education</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_Migration.html">1.4. Script 4: Internal Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_Immigration.html">1.5. Script 5: Immigration</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_Emigration.html">1.6. Script 6: Emigration</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_FirstMarriage.html">1.7. Script 7: First Marriage</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_FirstBirths.html">1.8. Script 8: First Births</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_HigherBirths.html">1.9. Script 9: Higher Order Births</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_ChildMortality.html">1.10. Script 10: Child Mortality</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_Ethnicity.html">1.11. Script 11: Ethnicity</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_SchoolPlanning.html">1.12. Script 12: School Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="13_LowerSecondary.html">1.13. Script 13: Lower Secondary Education</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.14. Script 14: Demographic Macro-Projections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#file-output">1.14.1. File output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#code">1.14.2. Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="15_Settings.html">1.15. Script 15: Model Settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../AnalysisOutput/AnalysisOutput-Index.html">2. Output Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Model/Model-Index.html">3. Technical Implementation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DYNAMIS-POP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="AnalysisInput-Index.html">1. Parameter Generation</a> &raquo;</li>
        
      <li>1.14. Script 14: Demographic Macro-Projections</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/Analysis/AnalysisInput/14_DemProj.Rmd.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="script-14-demographic-macro-projections">
<span id="script-14-demographic-macro-projections"></span><h1>1.14. Script 14: Demographic Macro-Projections<a class="headerlink" href="#script-14-demographic-macro-projections" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>This file creates the parameters based on demographic macro projections as typically available online e.g. from DemProj. These parameters can be used either directly in the model, or indirectly as alignment targets of demographic projections. Demographic scenario data are read in from csv files and are not calculated from micro data.</div></blockquote>
<div class="section" id="file-output">
<span id="file-output"></span><h2>1.14.1. File output<a class="headerlink" href="#file-output" title="Permalink to this headline">¶</a></h2>
<p>The code below generates model parameters stored in a Modgen .dat file</p>
<ul class="simple">
<li>Age-specific fertility distribution by calendar year</li>
<li>Total Fertility Rate (TFR) by calendar year</li>
<li>Sex ratio by calendar year</li>
<li>Mortality table by age and sex</li>
<li>Life expectancy by sex and year</li>
</ul>
</div>
<div class="section" id="code">
<span id="code"></span><h2>1.14.2. Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-{r, message=FALSE, warning=FALSE} notranslate"><div class="highlight"><pre><span></span>####################################################################################################
# 
#  DYNAMIS-POP Parameter Generation File 14 - Demographic Projections
#  This file is generic and works for all country contexts. 
#  Input file: globals_for_analysis.RData (To generate such a file run the setup script)
#  Last Update: Martin Spielauer 2018-05-12
#
####################################################################################################

####################################################################################################
# Clear work space, load required packages and the input object file
####################################################################################################

rm(list=ls())

library(haven)
library(dplyr)
library(data.table)
library(sp) 
library(maptools)
library(fmsb)

load(file=&quot;globals_for_analysis.RData&quot;)

# Set Parameter Output File

parafile  &lt;- file(g_para_demproj, &quot;w&quot;)

####################################################################################################
# Write the parameters (converted from csv files to modgen dat formats
####################################################################################################

cat(&quot;parameters { \n&quot;, file=parafile)

cat(&quot;//EN Life Expectancy\ndouble LifeExpectancy[SIM_YEAR_RANGE][SEX]  = {\n&quot;, file=parafile, append=TRUE) 
cat(dp_expectancy_dat, file=parafile, sep=&quot;, &quot;, append=TRUE)
cat(&quot;\n};\n\n&quot;, file=parafile, append=TRUE)

cat(&quot;//EN Mortality hazard by age\ndouble   MortalityTable[AGE_RANGE][SEX] = {\n&quot;, file=parafile, append=TRUE) 
cat(dp_mortality_dat, file=parafile, sep=&quot;, &quot;, append=TRUE)
cat(&quot;\n};\n\n&quot;, file=parafile, append=TRUE)

cat(&quot;//EN Sex Ratio\ndouble SexRatio[SIM_YEAR_RANGE] = {(101) &quot;,g_sexratio,&quot; };\n\n&quot;, file=parafile, append=TRUE) 

cat(&quot;//EN Total Fertility Rate\ndouble  TotalFertilityRate[SIM_YEAR_RANGE] = {\n&quot;, file=parafile, append=TRUE) 
cat(dp_tfr_dat, file=parafile, sep=&quot;, &quot;, append=TRUE)
cat(&quot;\n};\n\n&quot;, file=parafile, append=TRUE)

cat(&quot;//EN Fertility Age Distribution\ndouble AgeSpecificFertility[FERTILE_AGE_RANGE][SIM_YEAR_RANGE] = {\n&quot;, file=parafile, append=TRUE) 
cat(dp_fertility_dat, file=parafile, sep=&quot;, &quot;, append=TRUE)
cat(&quot;\n};\n\n&quot;, file=parafile, append=TRUE)

cat(&quot;\n};\n&quot;, file=parafile, append=TRUE) 
close(parafile)

</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="15_Settings.html" class="btn btn-neutral float-right" title="1.15. Script 15: Model Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="13_LowerSecondary.html" class="btn btn-neutral" title="1.13. Script 13: Lower Secondary Education" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Martin Spielauer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>